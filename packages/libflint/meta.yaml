package:
  name: libflint
  version: 3.4.0
  tag:
    - library
    - static_library
source:
  url: https://github.com/flintlib/flint/releases/download/v3.4.0/flint-3.4.0.tar.gz
  sha256: 9497679804dead926e3affeb8d4c58739d1c7684d60c2c12827550d28e454a33
requirements:
  host:
    - libgmp
    - libmpfr

build:
  type: static_library
  script: |
    emconfigure ./configure \
        CFLAGS="-fPIC" \
        --disable-dependency-tracking \
        --disable-shared \
        --prefix=${WASM_LIBRARY_DIR} \
        --with-gmp=${WASM_LIBRARY_DIR} \
        --with-mpfr=${WASM_LIBRARY_DIR} \
        --host=wasm32-unknown-emscripten \
        --disable-assembly \
        --disable-pthread
    emmake make -j ${PYODIDE_JOBS:-3}
    emmake make install
about:
  home: https://flintlib.org/
  license: GPL-3.0 OR LGPL-3.0
