From 48856b4ff761b212470cbdb8ab25cb7f68860855 Mon Sep 17 00:00:00 2001
From: Agriya Khetarpal <74401230+agriyakhetarpal@users.noreply.github.com>
Date: Fri, 9 May 2025 16:57:33 +0530
Subject: [PATCH] Keep SUNDIALS_EXPORT alive

---
 external_packages/casadi-sundials/sundials/sundials_config.h | 5 +++++
 1 file changed, 5 insertions(+)

diff --git a/external_packages/casadi-sundials/sundials/sundials_config.h b/external_packages/casadi-sundials/sundials/sundials_config.h
index dfd0c3d70..92bcdfe55 100644
--- a/external_packages/casadi-sundials/sundials/sundials_config.h
+++ b/external_packages/casadi-sundials/sundials/sundials_config.h
@@ -84,7 +84,12 @@
  * In all other cases (other platforms or static libraries under
  * Windows), the SUNDIALS_EXPORT macro is empty
  */
+#ifdef __EMSCRIPTEN__
+#include <emscripten.h>
+#define SUNDIALS_EXPORT EMSCRIPTEN_KEEPALIVE
+#else
 #define SUNDIALS_EXPORT
+#endif
 
 /* Disable some Visual studio warnings */
 #ifdef _MSC_VER
-- 
2.39.5 (Apple Git-154)

